<h1 id="page-title-small">Review</h1>
<div class="full-page-white-wrapper">
	<div class="full-page-white-center">

		{{#if DepartureFlight}}
		{{/if}} 
		<div class="flight-review">
			{{#with DepartureFlight as flight controller="flight"}}
			<h2>Departure from {{flight.origin}} 
				<span class="heading-price">${{flight.price}}</span>
				<span class="heading-duration">{{flight.flightLengthMinutesHours}}</span>
			</h2>

			<div class="saved-flight">
				<div class="admin-inside">
					{{#each leg in flight.legs}}
					<div class="leg-details">

						<div class="leg-departure">
							<div class="leg-from-name">From</div><div class="leg-from">{{leg.origin}}</div>	
						</div>

						<div class="leg-arrival">
							<div class="leg-to-name">To</div><div class="leg-to">{{leg.destination}}</div>
						</div>

						<div class="airline">
							<div class="airline-title">Airline</div> {{leg.airline}}
						</div>

						<div class="flight-number">
							<div class="flight-num-title">Flight No.</div> {{leg.flightNumber}}
						</div>
						<br/>
						<div class="departure">
							<div class="departure-title">Departure:</div>{{leg.departure_time}}
						</div>

						<div class="arrival">
							<div class="arrival-title">Arrival:</div>{{leg.arrival_time}}
						</div>
					</div>

					{{/each}}
				</div>

			</div>
			{{/with}}

		</div>
		{{#if ReturnFlight}}
		<div class="flight-review">
			{{#with ReturnFlight as flight controller="flight"}}
			<h2>Return from {{flight.origin}} 
				<span class="heading-price">${{flight.price}}</span>
				<span class="heading-duration">{{flight.flightLengthMinutesHours}}</span>
			</h2>
			<div class="saved-flight">
				<div class="admin-inside">
					{{#each leg in flight.legs}}
					<div class="leg-details">

						<div class="leg-departure">
							<div class="leg-from-name">From</div><div class="leg-from">{{leg.origin}}</div>	
						</div>

						<div class="leg-arrival">
							<div class="leg-to-name">To</div><div class="leg-to">{{leg.destination}}</div>
						</div>

						<div class="airline">
							<div class="airline-title">Airline</div> {{leg.airline}}
						</div>

						<div class="flight-number">
							<div class="flight-num-title">Flight No.</div> {{leg.flightNumber}}
						</div>
						<br/>
						<div class="departure">
							<div class="departure-title">Departure:</div>{{leg.departure_time}}
						</div>

						<div class="arrival">
							<div class="arrival-title">Arrival:</div>{{leg.arrival_time}}
						</div>
					</div>

					{{/each}}
				</div>

			</div>
			{{/with}}
		</div>
		{{/if}}
		<!-- {/if}} -->

		<div id="pruchase-form">
			<div id="purchase-wrapper" {{bind-attr class="wrapperWidth"}}>
				
				<!-- If the user is not logged in, they need to be. Create a new account or let them sign in  -->
				{{#if showReviewRegistration}}
				<form id="purchase-signup">

					<div id="purchase-register">
						<h3>Register</h3>
						<!-- <p>This quick registration allows you to login and manage your flights</p> -->
						{{input value=email type="text" class="small-rounded"  placeholder="Email"}}<br/>
						{{input value=email_confirmation type="text" class="small-rounded"  placeholder="Confirm Email"}}<br/>
						{{input value=password type="password" class="small-rounded" placeholder="Create Password"}}<br/>
						{{input value=password_confirmation type="password" class="small-rounded" placeholder="Confirm password"}}<br/>
						<p>have an account? <a href="" {{action "showLogin"}}>Login</a></p>
						<button class="rounded" {{action "setupUser"}}>Register</button>
					</div>

					<div id="purchase-login" style="display:none;">
						<h3>Login</h3>
						<!-- <p>This quick registration allows you to login and manage your flights</p> -->
						{{input value=email type="text" class="small-rounded"  placeholder="Email"}}<br/>
						{{input value=password type="password" class="small-rounded" placeholder="Password"}}<br/>
						<p>no account? <a href="" {{action "showRegister"}}>Register</a></p>
						<button class="rounded" {{action "setupUser"}}>Log In</button>
					</div>
				</form>
				{{/if}}

				<!-- If the user has not entered their extra details, we need them as well, so get them  -->
				{{#if signedInAndNeedsDetails}}
					<form id="purchase-extra-details">
						<div id="purchase-extra-information">
						<h3>Fill out these details! Please make it not hideous Alistair :(</h3>
						<!-- Only let them submit details which havent been filled out yet -->
						{{#if needsFirstName}}
							{{input value=firstName type="text" class="small-rounded"  placeholder="First Name"}}<br/>
						{{/if}}
						{{#if needsLastName}}
							{{input value=lastName type="text" class="small-rounded" placeholder="Last Name"}}<br/>
						{{/if}}
						{{#if needsAddress}}
							{{input value=address type="text" class="small-rounded" placeholder="Billing Address"}}<br/>
						{{/if}}
						<button class="rounded" {{action "submitExtraDetails"}}>Submit</button>
					</div>
					</form>
				{{/if}}
				<form id="pay-form">
					<h3>Payment Details</h3>

					{{input value=cardNumber type="text" class="small-rounded" placeholder="Card number" }}<br/>
					{{input value=expiryDate type="text" class="small-rounded" placeholder="MM / YY"}}<br/>
					{{input value=securityCode type="password" class="small-rounded" placeholder="CVC"}}<br/>
					{{input value=nameOnCard type="text" class="small-rounded" placeholder="Name on Card"}}<br/>	

				</form>
			</div>
		</div>

		<div id="purchase-flights">
			<button class="rounded" {{action "purchase"}}>Purchase</button>
		</div>

		
	</div>
</div>